## 大数据问题

* **例一**

  1. **问题描述**

     32位无符号整数的范围是0~4294967295，现在有一个包含40亿个无符号整数的文件，所以整个范围中必然存在没出现过的数。可以使用最多`1GB`内存，怎么找到所有未出现的数?

  2. **问题分析**

     使用位图，40亿长度的bit数组。

  3. **进阶问题**

     内存限制为`3KB`，但是只需找到一个没出现过的数即可。

     * 现在全部利用`3KB`的内存空间，将`3KB`申请一个最大长度且长度为2的n次方的int数组，那么数组长度计算如下：即512

       > `3KB / 4B = 750 > 521 = 2^9`，所以申请长度为512的int数组，长度为2的n次方的目的是，把32位无符号整数的范围分组，好让分组时可以被整除

     * 把0~2^32-1范围上的数分成512份，每份负责的范围步长都一样，负责的步长为`2^32 / 2^9 = 2^23`所以int[0]负责看0~2^23-1范围上的数是不是都出现了，这里就算重合导致认为都出现了也没关系，因为肯定有一组数量不够，我们找到一组就可以了。

     * 对所有的数遍历，然后对每个数字除以2^23，余数就是下标位置，该下标位置++

     * 发现数组中的一个元素值不够2^32个，说明这个范围里面，有数字没有出现

     * 再次利用`3KB`，将2^23次方这个步长分组，回到最开始的那一步，然后再找再找

     * 最后这个范围小于等于24000个数的时候，那么把`3KB`申请长度为24000的比特数组，再过最后一遍文件即可。

     > 注意int占4个字节，就是32位，都可表示

     > 如果要求用有限个变量的话依然可以完成这个问题，二分二分二分